(this["webpackJsonploop-machine"]=this["webpackJsonploop-machine"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),i=n.n(r),o=(n(41),n(4)),s=(n(42),n(43),[n.p+"static/media/120_future_funk_beats_25.5eb417fc.mp3",n.p+"static/media/120_stutter_breakbeats_16.37c82282.mp3",n.p+"static/media/Bass Warwick heavy funk groove on E 120 BPM.52c24c81.mp3",n.p+"static/media/electric guitar coutry slide 120bpm - B.230fcab8.mp3",n.p+"static/media/FUD_120_StompySlosh.27bdc145.mp3",n.p+"static/media/GrooveB_120bpm_Tanggu.3e1411b4.mp3",n.p+"static/media/MazePolitics_120_Perc.2d08c654.mp3",n.p+"static/media/PAS3GROOVE1.03B.f77c6da4.mp3",n.p+"static/media/SilentStar_120_Em_OrganSynth.f2d668af.mp3"]),u=Object(a.createContext)(0),l=n(3);var f=function(e){var t=e.file,n=e.canPlay,c=Object(a.useState)(!1),r=Object(o.a)(c,2),i=r[0],s=r[1],f=Object(a.useRef)(null),d=Object(a.useContext)(u),h=d.timer,b=d.setEnableCounter,m=d.effectAllSounds,p=d.setEffectAllSounds;return Object(a.useEffect)((function(){n&&i?0!==h?setTimeout((function(){n&&f.current.play()}),8e3-h):f.current.play():(f.current.pause(),f.current.currentTime=0)}),[n,i]),Object(a.useEffect)((function(){"enable"!==m.change||i||(s(!0),b((function(e){return e+1}))),"disable"===m.change&&i&&(s(!1),b((function(e){return e-1})),f.current.pause(),f.current.currentTime=0),p(!1)}),[m]),Object(l.jsx)("div",{onClick:function(){b(i?function(e){return e-1}:function(e){return e+1}),s(!i)},className:i?"playing pad":"notPlaying pad",children:Object(l.jsx)("audio",{src:t,ref:f,loop:!0})})};var d=function(e){var t=e.canPlay;return Object(l.jsx)("div",{className:"padsContainer",children:s.map((function(e,n){return Object(l.jsx)(f,{file:e,canPlay:t},n)}))})},h=(n(45),n(17)),b=n.n(h),m=n(19),p=n.n(m),j=n(20),g=n.n(j),v=n(21),O=n.n(v),k=n(23),x=n.n(k),w=n(22),y=n.n(w),S=n(14),C=n(15),A=n(16),E=n.n(A),U=function(){function e(t,n){var a=this;Object(S.a)(this,e),this.config={bufferLen:4096,numChannels:2,mimeType:"audio/wav"},this.recording=!1,this.callbacks={getBuffer:[],exportWAV:[]},Object.assign(this.config,n),this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,this.config.bufferLen,this.config.numChannels,this.config.numChannels),this.node.onaudioprocess=function(e){if(a.recording){for(var t=[],n=0;n<a.config.numChannels;n++)t.push(e.inputBuffer.getChannelData(n));a.worker.postMessage({command:"record",buffer:t})}},t.connect(this.node),this.node.connect(this.context.destination);this.worker=new E.a((function(){var e,t,n=0,a=[];function c(){for(var e=0;e<t;e++)a[e]=[]}function r(e,t){for(var n=new Float32Array(t),a=0,c=0;c<e.length;c++)n.set(e[c],a),a+=e[c].length;return n}function i(e,t,n){for(var a=0;a<n.length;a++)e.setUint8(t+a,n.charCodeAt(a))}this.onmessage=function(o){switch(o.data.command){case"init":s=o.data.config,e=s.sampleRate,t=s.numChannels,c();break;case"record":!function(e){for(var c=0;c<t;c++)a[c].push(e[c]);n+=e[0].length}(o.data.buffer);break;case"exportWAV":!function(c){for(var o,s=[],u=0;u<t;u++)s.push(r(a[u],n));o=2===t?function(e,t){var n=e.length+t.length,a=new Float32Array(n),c=0,r=0;for(;c<n;)a[c++]=e[r],a[c++]=t[r],r++;return a}(s[0],s[1]):s[0];var l=function(n){var a=new ArrayBuffer(44+2*n.length),c=new DataView(a);return i(c,0,"RIFF"),c.setUint32(4,36+2*n.length,!0),i(c,8,"WAVE"),i(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,t,!0),c.setUint32(24,e,!0),c.setUint32(28,4*e,!0),c.setUint16(32,2*t,!0),c.setUint16(34,16,!0),i(c,36,"data"),c.setUint32(40,2*n.length,!0),function(e,t,n){for(var a=0;a<n.length;a++,t+=2){var c=Math.max(-1,Math.min(1,n[a]));e.setInt16(t,c<0?32768*c:32767*c,!0)}}(c,44,n),c}(o),f=new Blob([l],{type:c});this.postMessage({command:"exportWAV",data:f})}(o.data.type);break;case"getBuffer":!function(){for(var e=[],c=0;c<t;c++)e.push(r(a[c],n));this.postMessage({command:"getBuffer",data:e})}();break;case"clear":n=0,a=[],c()}var s}}),{}),this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.config.numChannels}}),this.worker.onmessage=function(e){var t=a.callbacks[e.data.command].pop();"function"==typeof t&&t(e.data.data)}}return Object(C.a)(e,[{key:"record",value:function(){this.recording=!0}},{key:"stop",value:function(){this.recording=!1}},{key:"clear",value:function(){this.worker.postMessage({command:"clear"})}},{key:"getBuffer",value:function(e){if(!(e=e||this.config.callback))throw new Error("Callback not set");this.callbacks.getBuffer.push(e),this.worker.postMessage({command:"getBuffer"})}},{key:"exportWAV",value:function(e,t){if(t=t||this.config.mimeType,!(e=e||this.config.callback))throw new Error("Callback not set");this.callbacks.exportWAV.push(e),this.worker.postMessage({command:"exportWAV",type:t})}}],[{key:"forceDownload",value:function(e,t){var n=(window.URL||window.webkitURL).createObjectURL(e),a=window.document.createElement("a");a.href=n,a.download=t||"output.wav";var c=document.createEvent("Event");c.initEvent("click",!0,!0),a.dispatchEvent(c)}}]),e}();var _=function(e){var t=e.setEnableAllSounds,n=e.setCanPlay,c=e.setRecordUrl,r=Object(a.useState)(!1),i=Object(o.a)(r,2),s=i[0],u=i[1],f=Object(a.useState)(null),d=Object(o.a)(f,2),h=d[0],m=d[1],j=function(e){n(e)},v=function(e){t({change:e}),"disable"===e&&n(!1)},k=function(){s?(h.stop(),h.exportWAV((function(e){var t=URL.createObjectURL(e);c(t)}))):function(){var e=new window.AudioContext;navigator.mediaDevices.getDisplayMedia({audio:!0,video:!0}).then((function(t){var n=e.createMediaStreamSource(t),a=new U(n,{numChannels:1});a.record(),m(a)})).catch((function(e){return console.log("Uh oh... unable to get stream...",e)}))}(),u(!s)};return Object(l.jsxs)("div",{className:"controlPanel",children:[Object(l.jsx)(b.a,{fontSize:"large",onClick:function(){return j(!0)}}),Object(l.jsx)(p.a,{fontSize:"large",onClick:function(){return j(!1)}}),Object(l.jsx)(g.a,{fontSize:"large",onClick:function(){return v("disable")}}),Object(l.jsx)(O.a,{fontSize:"large",onClick:function(){return v("enable")}}),s?Object(l.jsx)(y.a,{fontSize:"large",onClick:k}):Object(l.jsx)(x.a,{fontSize:"large",onClick:k})]})},B=n(35);n(53);var M=function(){var e=Object(a.useState)(0),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(0),i=Object(o.a)(r,2),s=i[0],f=i[1],h=Object(a.useState)(!1),b=Object(o.a)(h,2),m=b[0],p=b[1],j=Object(a.useState)(!1),g=Object(o.a)(j,2),v=g[0],O=g[1],k=Object(a.useState)(null),x=Object(o.a)(k,2),w=x[0],y=x[1];return Object(a.useEffect)((function(){if(m&&s>0){var e=setInterval((function(){c(7e3===n?0:function(e){return e+10})}),10);return function(){return clearInterval(e)}}c(0)}),[n,s,m]),Object(l.jsx)(u.Provider,{value:{timer:n,setEnableCounter:f,effectAllSounds:v,setEffectAllSounds:O},children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("h1",{children:"Loop Machine"}),Object(l.jsx)(d,{canPlay:m}),Object(l.jsx)(_,{setCanPlay:p,setEnableAllSounds:O,setRecordUrl:y}),Object(l.jsx)("div",{classname:"audioPlayer",children:w?Object(l.jsx)(B.a,{src:w}):null})]})})};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(M,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.f066295b.chunk.js.map